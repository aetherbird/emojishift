#!/usr/bin/env python3

import sys
import argparse

interactive_mode = False
input_parse_level = "2"

argparser = argparse.ArgumentParser(description="emojishift: translate text to emoji")
argparser.add_argument(
    "-l", "--light", "-1", action="store_const", const="1", dest="parse_level",
    help="light: letters and text only"
)
argparser.add_argument(
    "-s", "--standard", "-2", action="store_const", const="2", dest="parse_level",
    help="standard: apply glyphs and letters"
)
argparser.add_argument(
    "-a", "--alternate", "-3", action="store_const", const="3", dest="parse_level",
    help="alternate: apply glyphs and alternate unicode"
)
argparser.add_argument(
    "-d", "--deep", "-4", action="store_const", const="4", dest="parse_level",
    help="deep: apply maximum glyphing"
)

passedargs = argparser.parse_args()
if passedargs.parse_level:
    input_parse_level = passedargs.parse_level

# isatty will return False if input is piped in
if sys.stdin.isatty():
    interactive_mode = True
else:
    string_to_shift = sys.stdin.read().strip()

if interactive_mode == True:
    input_forstring = input("Define Input > ")
    print(f"\n\nTranslation Level: \n\n1. Light: Letters and text only\n2. Standard: Apply glyphs and letters\n3. Alternate: Apply glyphs and alternate unicode\n4. Deep: Apply maximum glyphing\n\n")
    input_parse_level = input("Select your translation level (default 2):")
    string_to_shift = str(input_forstring)
    if not input_parse_level:
        input_parse_level = "2"

    if input_parse_level not in ["1", "2", "3", "4"]:
        print("Invalid input, defaulting to standard parse (2)")
        input_parse_level = "2"

alpha_translation_dict_std = {
    "a": "ðŸ‡¦",
    "b": "ðŸ‡§",
    "c": "ðŸ‡¨",
    "d": "ðŸ‡©",
    "e": "ðŸ‡ª",
    "f": "ðŸ‡«",
    "g": "ðŸ‡¬",
    "h": "ðŸ‡­",
    "i": "ðŸ‡®",
    "j": "ðŸ‡¯",
    "k": "ðŸ‡°",
    "l": "ðŸ‡±",
    "m": "ðŸ‡²",
    "n": "ðŸ‡³",
    "o": "ðŸ‡´",
    "p": "ðŸ‡µ",
    "q": "ðŸ‡¶",
    "r": "ðŸ‡·",
    "s": "ðŸ‡¸",
    "t": "ðŸ‡¹",
    "u": "ðŸ‡º",
    "v": "ðŸ‡»",
    "w": "ðŸ‡¼",
    "x": "ðŸ‡½",
    "y": "ðŸ‡¾",
    "z": "ðŸ‡¿"
}

translation_dict_digits = {
    "0": "0ï¸âƒ£",
    "1": "1ï¸âƒ£",
    "2": "2ï¸âƒ£",
    "3": "3ï¸âƒ£",
    "4": "4ï¸âƒ£",
    "5": "5ï¸âƒ£",
    "6": "6ï¸âƒ£",
    "7": "7ï¸âƒ£",
    "8": "8ï¸âƒ£",
    "9": "9ï¸âƒ£"
}

translation_dict_symbols = {
    "$": "ðŸ’²",
    ".": "âº",
    "#": "#ï¸âƒ£",
    "*": "âœ³ï¸",
    "+": "âž•",
    "-": "âž–",
    "/": "âž—",
    "=": "ðŸŸ°",
    "?": "â“",
    "!": "â—",
    "%": "ðŸ’¯",
    "&": "ðŸ”—",
    "@": "ðŸ“§",
    "^": "ðŸ”¼"
}

translation_dict_alt_letters = {
    "a": "ðŸ…°ï¸",
    "b": "ðŸ…±ï¸",
    "c": "ðŸ…²",
    "d": "ðŸ…³",
    "e": "ðŸ…´",
    "f": "ðŸ…µ",
    "g": "ðŸ…¶",
    "h": "ðŸ…·",
    "i": "ðŸ…¸",
    "j": "ðŸ…¹",
    "k": "ðŸ…º",
    "l": "ðŸ…»",
    "m": "ðŸ…¼",
    "n": "ðŸ…½",
    "o": "ðŸ…¾ï¸",
    "p": "ðŸ…¿ï¸",
    "q": "ðŸ†€",
    "r": "ðŸ†",
    "s": "ðŸ†‚",
    "t": "ðŸ†ƒ",
    "u": "ðŸ†„",
    "v": "ðŸ†…",
    "w": "ðŸ††",
    "x": "ðŸ†‡",
    "y": "ðŸ†ˆ",
    "z": "ðŸ†‰"
}

def light_parse(string_to_shift):
    for in_a, out_a in alpha_translation_dict_std.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    for in_a, out_a in translation_dict_digits.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    return string_to_shift

def standard_parse(string_to_shift):
    for in_a, out_a in alpha_translation_dict_std.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    for in_a, out_a in translation_dict_digits.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    for in_a, out_a in translation_dict_symbols.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    return string_to_shift

def alternate_parse(string_to_shift):
    for in_a, out_a in translation_dict_alt_letters.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    for in_a, out_a in translation_dict_digits.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    for in_a, out_a in translation_dict_symbols.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    return string_to_shift

def deep_parse(string_to_shift):
    for in_a, out_a in alpha_translation_dict_std.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    for in_a, out_a in translation_dict_digits.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    for in_a, out_a in translation_dict_symbols.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    return string_to_shift

if input_parse_level == "1":
    string_to_shift = light_parse(string_to_shift)
elif input_parse_level == "2":
    string_to_shift = standard_parse(string_to_shift)
elif input_parse_level == "3":
    string_to_shift = alternate_parse(string_to_shift)
elif input_parse_level == "4":
    string_to_shift = deep_parse(string_to_shift)

if interactive_mode == True:
    print(f" > {string_to_shift}")
else:
    print(string_to_shift)

