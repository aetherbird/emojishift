#!/usr/bin/env python3

import sys
import argparse
import re

interactive_mode = False
reverse_mode = False
default_parse_level = "3"
input_parse_level = None

argparser = argparse.ArgumentParser(description="emojishift: translate text to emoji, or emoji to text")
argparser.add_argument(
    "-l", "--light", "-1", action="store_const", const="1", dest="parse_level",
    help="light: letters and text only"
)
argparser.add_argument(
    "-g", "--glyph", "-2", action="store_const", const="2", dest="parse_level",
    help="glyph: glyph translations only"
)
argparser.add_argument(
    "-s", "--standard", "-3", action="store_const", const="3", dest="parse_level",
    help="standard: apply glyphs and letters"
)
argparser.add_argument(
    "-a", "--alternate", "-4", action="store_const", const="4", dest="parse_level",
    help="alternate: apply glyphs and alternate unicode"
)
argparser.add_argument(
    "-d", "--deep", "-5", action="store_const", const="5", dest="parse_level",
    help="deep: apply maximum glyphing"
)
argparser.add_argument(
    "-r", "--reverse", action="store_true", dest="reverse",
    help="reverse-translate from emoji to text"
)
argparser.add_argument(
    "-v", "--version", action="version", version="emojishift 0.11"
)

passedargs = argparser.parse_args()
if passedargs.parse_level:
    input_parse_level = passedargs.parse_level

if passedargs.reverse:
    reverse_mode = True

# isatty will return False if input is piped
if sys.stdin.isatty():
    interactive_mode = True
else:
    string_to_shift = sys.stdin.read().strip()

if interactive_mode == True:
    input_forstring = input("Define Input > ")
    if not input_parse_level and not reverse_mode:
        input_parse_level = input(f"Select your translation level (default {default_parse_level}): ")
        print(f"\n\nTranslation Level: \n\n1. Light: Letters and text only\n2. Glyph: Glyph translations only\n3. Standard: Apply glyphs and letters\n4. Alternate: Apply glyphs and alternate unicode\n5. Deep: Apply maximum glyphing\n\n")
    string_to_shift = str(input_forstring)

    if input_parse_level not in ["1", "2", "3", "4", "5"] and not reverse_mode:
        print(f"Invalid input, defaulting to standard parse level {default_parse_level}.\n")
        input_parse_level = default_parse_level
else:
    if not input_parse_level and not reverse_mode:
        input_parse_level = default_parse_level

alpha_translation_dict_std = {
    "a": "ðŸ‡¦",
    "b": "ðŸ‡§",
    "c": "ðŸ‡¨",
    "d": "ðŸ‡©",
    "e": "ðŸ‡ª",
    "f": "ðŸ‡«",
    "g": "ðŸ‡¬",
    "h": "ðŸ‡­",
    "i": "ðŸ‡®",
    "j": "ðŸ‡¯",
    "k": "ðŸ‡°",
    "l": "ðŸ‡±",
    "m": "ðŸ‡²",
    "n": "ðŸ‡³",
    "o": "ðŸ‡´",
    "p": "ðŸ‡µ",
    "q": "ðŸ‡¶",
    "r": "ðŸ‡·",
    "s": "ðŸ‡¸",
    "t": "ðŸ‡¹",
    "u": "ðŸ‡º",
    "v": "ðŸ‡»",
    "w": "ðŸ‡¼",
    "x": "ðŸ‡½",
    "y": "ðŸ‡¾",
    "z": "ðŸ‡¿"
}

translation_dict_digits = {
    "0": "0ï¸âƒ£",
    "1": "1ï¸âƒ£",
    "2": "2ï¸âƒ£",
    "3": "3ï¸âƒ£",
    "4": "4ï¸âƒ£",
    "5": "5ï¸âƒ£",
    "6": "6ï¸âƒ£",
    "7": "7ï¸âƒ£",
    "8": "8ï¸âƒ£",
    "9": "9ï¸âƒ£"
}

translation_dict_symbols = {
    "$": "ðŸ’²",
    ".": "âº",
    "#": "#ï¸âƒ£",
    "*": "âœ³ï¸",
    "+": "âž•",
    "-": "âž–",
    "/": "âž—",
    "=": "ðŸŸ°",
    "?": "â“",
    "!": "â—",
    "%": "ðŸ’¯",
    "&": "ðŸ”—",
    "@": "ðŸ“§",
    "^": "ðŸ”¼"
}

translation_dict_alt_letters = {
    "a": "ðŸ…°ï¸",
    "b": "ðŸ…±ï¸",
    "c": "ðŸ…²",
    "d": "ðŸ…³",
    "e": "ðŸ…´",
    "f": "ðŸ…µ",
    "g": "ðŸ…¶",
    "h": "ðŸ…·",
    "i": "ðŸ…¸",
    "j": "ðŸ…¹",
    "k": "ðŸ…º",
    "l": "ðŸ…»",
    "m": "ðŸ…¼",
    "n": "ðŸ…½",
    "o": "ðŸ…¾ï¸",
    "p": "ðŸ…¿ï¸",
    "q": "ðŸ†€",
    "r": "ðŸ†",
    "s": "ðŸ†‚",
    "t": "ðŸ†ƒ",
    "u": "ðŸ†„",
    "v": "ðŸ†…",
    "w": "ðŸ††",
    "x": "ðŸ†‡",
    "y": "ðŸ†ˆ",
    "z": "ðŸ†‰"
}

main_glyph_dict = {
    r"\blove\b": "â¤ï¸",
    r"\bcoffee\b": "â˜•",
    r"\bbook\b": "ðŸ“š",
    r"\bcat\b": "ðŸ±",
    r"\bdog\b": "ðŸ¶",
    r"\bmusic\b": "ðŸŽ¶",
    r"\bsun\b": "â˜€ï¸",
    r"\brainbow\b": "ðŸŒˆ",
    r"\btree\b": "ðŸŒ³",
    r"\bstar\b": "â­",
    r"\bphone\b": "ðŸ“±",
    r"\bmoney\b": "ðŸ’°",
    r"\bghost\b": "ðŸ‘»",
    r"\bfire\b": "ðŸ”¥",
    r"\bparty\b": "ðŸŽ‰",
    r"\bsleep\b": "ðŸ˜´",
    r"\bflower\b": "ðŸŒ¸",
    r"\bgame\b": "ðŸŽ®",
    r"\bcar\b": "ðŸš—",
    r"\bmoon\b": "ðŸŒ™",
    r"\bwine\b": "ðŸ·",
    r"\bpizza\b": "ðŸ•",
    r"\bheart\b": "ðŸ’–",
    r"\bplane\b": "âœˆï¸",
    r"\blaptop\b": "ðŸ’»",
    r"\bcloud\b": "â˜ï¸",
    r"\brobot\b": "ðŸ¤–",
    r"\bsnow\b": "â„ï¸",
    r"\bwater\b": "ðŸ’§",
    r"\bschool\b": "ðŸ«",
    r"\bapple\b": "ðŸŽ",
    r"\bturtle\b": "ðŸ¢",
    r"\bbear\b": "ðŸ»",
    r"\btrain\b": "ðŸš†",
    r"\bcherry\b": "ðŸ’",
    r"\bbread\b": "ðŸž",
    r"\bclock\b": "â°",
    r"\bradio\b": "ðŸ“»",
    r"\bshoe\b": "ðŸ‘Ÿ",
    r"\bfrog\b": "ðŸ¸",
    r"\bhome\b": "ðŸ ",
    r"\bhouse\b": "ðŸ¡",
    r"\bidea\b": "ðŸ’¡",
    r"\bcake\b": "ðŸ°",
    r"\bfish\b": "ðŸŸ",
    r"\bfork\b": "ðŸ´",
    r"\btiger\b": "ðŸ¯",
    r"\bgame\b": "ðŸŽ²",
    r"\bbike\b": "ðŸš²",
    r"\bmilk\b": "ðŸ¥›",
    r"\bwolf\b": "ðŸº",
    r"\bdoor\b": "ðŸšª",
    r"\bhike\b": "ðŸ¥¾",
    r"\bglow\b": "âœ¨",
    r"\bhand\b": "ðŸ¤š",
    r"\bmail\b": "ðŸ“§",
    r"\brock\b": "ðŸª¨",
    r"\bsoap\b": "ðŸ§¼",
    r"\bhug\b": "ðŸ¤—",
    r"\bhat\b": "ðŸŽ©",
    r"\bkey\b": "ðŸ”‘",
    r"\bbus\b": "ðŸšŒ",
    r"\bbat\b": "ðŸ¦‡",
    r"\bcup\b": "â˜•",
    r"\bbed\b": "ðŸ›ï¸",
    r"\btop\b": "ðŸ”",
    r"\bice\b": "ðŸ§Š",
    r"\brun\b": "ðŸƒâ€â™‚ï¸",
    r"\bwow\b": "ðŸ˜²",
    r"\bno\b": "ðŸš«",
    r"\byes\b": "ðŸ‘",
    r"\bjoy\b": "ðŸ˜‚",
    r"\bok\b": "ðŸ‘Œ",
    r"\bfun\b": "ðŸ˜„",
    r"\bfriend\b": "ðŸ‘«",
    r"\bmovie\b": "ðŸŽ¥",
    r"\bbirthday\b": "ðŸŽ‚",
    r"\btime\b": "âŒ›",
    r"\bballoon\b": "ðŸŽˆ",
    r"\btaco\b": "ðŸŒ®",
    r"\brose\b": "ðŸŒ¹",
    r"\bchicken\b": "ðŸ”",
    r"\bhappy\b": "ðŸ˜Š",
    r"\blaugh\b": "ðŸ˜†",
    r"\bhorse\b": "ðŸ´",
    r"\bwhale\b": "ðŸ‹",
    r"\bcamera\b": "ðŸ“·",
    r"\bguitar\b": "ðŸŽ¸",
    r"\bcoin\b": "ðŸª™",
    r"\bpeach\b": "ðŸ‘",
    r"\bfuel\b": "â›½",
    r"\bpig\b": "ðŸ·",
    r"\bearth\b": "ðŸŒ",
    r"\blion\b": "ðŸ¦",
    r"\bfork\b": "ðŸ½ï¸",
    r"\bmint\b": "ðŸŒ¿",
    r"\bbag\b": "ðŸ‘œ",
    r"\bwave\b": "ðŸŒŠ",
    r"\bbee\b": "ðŸ",
    r"\bpineapple\b": "ðŸ",
    r"\bhand\b": "âœ‹",
    r"\beye\b": "ðŸ‘ï¸",
    r"\bgold\b": "ðŸ¥‡",
    r"\btv\b": "ðŸ“º",
    r"\bchat\b": "ðŸ’¬",
    r"\bair\b": "ðŸ’¨",
    r"\bwin\b": "ðŸ†",
    r"\bsea\b": "ðŸŒŠ"
}

main_glyph_dict_aggressive = {
    r"love": "â¤ï¸",
    r"coffee": "â˜•",
    r"book": "ðŸ“š",
    r"cat": "ðŸ±",
    r"dog": "ðŸ¶",
    r"music": "ðŸŽ¶",
    r"sun": "â˜€ï¸",
    r"rainbow": "ðŸŒˆ",
    r"tree": "ðŸŒ³",
    r"star": "â­",
    r"phone": "ðŸ“±",
    r"money": "ðŸ’°",
    r"ghost": "ðŸ‘»",
    r"fire": "ðŸ”¥",
    r"party": "ðŸŽ‰",
    r"sleep": "ðŸ˜´",
    r"flower": "ðŸŒ¸",
    r"game": "ðŸŽ®",
    r"car": "ðŸš—",
    r"moon": "ðŸŒ™",
    r"wine": "ðŸ·",
    r"pizza": "ðŸ•",
    r"heart": "ðŸ’–",
    r"plane": "âœˆï¸",
    r"laptop": "ðŸ’»",
    r"cloud": "â˜ï¸",
    r"robot": "ðŸ¤–",
    r"snow": "â„ï¸",
    r"water": "ðŸ’§",
    r"school": "ðŸ«",
    r"apple": "ðŸŽ",
    r"turtle": "ðŸ¢",
    r"bear": "ðŸ»",
    r"train": "ðŸš†",
    r"cherry": "ðŸ’",
    r"bread": "ðŸž",
    r"clock": "â°",
    r"radio": "ðŸ“»",
    r"shoe": "ðŸ‘Ÿ",
    r"frog": "ðŸ¸",
    r"home": "ðŸ ",
    r"house": "ðŸ¡",
    r"idea": "ðŸ’¡",
    r"cake": "ðŸ°",
    r"fish": "ðŸŸ",
    r"fork": "ðŸ´",
    r"tiger": "ðŸ¯",
    r"bike": "ðŸš²",
    r"milk": "ðŸ¥›",
    r"wolf": "ðŸº",
    r"door": "ðŸšª",
    r"hike": "ðŸ¥¾",
    r"glow": "âœ¨",
    r"hand": "ðŸ¤š",
    r"mail": "ðŸ“§",
    r"rock": "ðŸª¨",
    r"soap": "ðŸ§¼",
    r"hug": "ðŸ¤—",
    r"hat": "ðŸŽ©",
    r"key": "ðŸ”‘",
    r"bus": "ðŸšŒ",
    r"bat": "ðŸ¦‡",
    r"cup": "â˜•",
    r"bed": "ðŸ›ï¸",
    r"top": "ðŸ”",
    r"ice": "ðŸ§Š",
    r"run": "ðŸƒâ€â™‚ï¸",
    r"wow": "ðŸ˜²",
    r"no": "ðŸš«",
    r"yes": "ðŸ‘",
    r"joy": "ðŸ˜‚",
    r"ok": "ðŸ‘Œ",
    r"fun": "ðŸ˜„",
    r"friend": "ðŸ‘«",
    r"movie": "ðŸŽ¥",
    r"birthday": "ðŸŽ‚",
    r"time": "âŒ›",
    r"balloon": "ðŸŽˆ",
    r"taco": "ðŸŒ®",
    r"rose": "ðŸŒ¹",
    r"chicken": "ðŸ”",
    r"happy": "ðŸ˜Š",
    r"laugh": "ðŸ˜†",
    r"horse": "ðŸ´",
    r"whale": "ðŸ‹",
    r"camera": "ðŸ“·",
    r"guitar": "ðŸŽ¸",
    r"coin": "ðŸª™",
    r"peach": "ðŸ‘",
    r"fuel": "â›½",
    r"pig": "ðŸ·",
    r"earth": "ðŸŒ",
    r"lion": "ðŸ¦",
    r"mint": "ðŸŒ¿",
    r"bag": "ðŸ‘œ",
    r"wave": "ðŸŒŠ",
    r"bee": "ðŸ",
    r"pineapple": "ðŸ",
    r"eye": "ðŸ‘ï¸",
    r"gold": "ðŸ¥‡",
    r"tv": "ðŸ“º",
    r"chat": "ðŸ’¬",
    r"air": "ðŸ’¨",
    r"win": "ðŸ†",
    r"sea": "ðŸŒŠ"
}

if reverse_mode == False:
    string_to_shift = string_to_shift.lower()

def apply_glyphs(in_b, out_b, string_in):
    string_shift = re.sub(in_b, out_b, string_in)
    return string_shift

def light_parse(string_to_shift):
    for in_a, out_a in alpha_translation_dict_std.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    for in_a, out_a in translation_dict_digits.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    return string_to_shift

def glyph_parse(string_to_shift):
    for in_a, out_a in main_glyph_dict.items():
        string_to_shift = apply_glyphs(in_a, out_a, string_to_shift)
    for in_a, out_a in main_glyph_dict_aggressive.items():
        string_to_shift = apply_glyphs(in_a, out_a, string_to_shift)
    return string_to_shift

def standard_parse(string_to_shift):
    for in_a, out_a in main_glyph_dict.items():
        string_to_shift = apply_glyphs(in_a, out_a, string_to_shift)
    for in_a, out_a in alpha_translation_dict_std.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    for in_a, out_a in translation_dict_digits.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    for in_a, out_a in translation_dict_symbols.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    return string_to_shift

def alternate_parse(string_to_shift):
    for in_a, out_a in main_glyph_dict.items():
        string_to_shift = apply_glyphs(in_a, out_a, string_to_shift)
    for in_a, out_a in translation_dict_alt_letters.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    for in_a, out_a in translation_dict_digits.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    for in_a, out_a in translation_dict_symbols.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    return string_to_shift

def deep_parse(string_to_shift):
    for in_a, out_a in main_glyph_dict.items():
        string_to_shift = apply_glyphs(in_a, out_a, string_to_shift)
    for in_a, out_a in main_glyph_dict_aggressive.items():
        string_to_shift = apply_glyphs(in_a, out_a, string_to_shift)
    for in_a, out_a in alpha_translation_dict_std.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    for in_a, out_a in translation_dict_digits.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    for in_a, out_a in translation_dict_symbols.items():
        string_to_shift = string_to_shift.replace(in_a, out_a)
    return string_to_shift

def reverse_parse(string_to_shift):
    for in_a, out_a in main_glyph_dict_aggressive.items():
        string_to_shift = apply_glyphs(out_a, in_a, string_to_shift)
    for in_a, out_a in alpha_translation_dict_std.items():
        string_to_shift = string_to_shift.replace(out_a, in_a)
    for in_a, out_a in translation_dict_digits.items():
        string_to_shift = string_to_shift.replace(out_a, in_a)
    for in_a, out_a in translation_dict_symbols.items():
        string_to_shift = string_to_shift.replace(out_a, in_a)
    return string_to_shift

if reverse_mode == True:
    string_to_shift = reverse_parse(string_to_shift)
elif input_parse_level == "1":
    string_to_shift = light_parse(string_to_shift)
elif input_parse_level == "2":
    string_to_shift = glyph_parse(string_to_shift)
elif input_parse_level == "3":
    string_to_shift = standard_parse(string_to_shift)
elif input_parse_level == "4":
    string_to_shift = alternate_parse(string_to_shift)
elif input_parse_level == "5":
    string_to_shift = deep_parse(string_to_shift)

if interactive_mode == True:
    print(f" > {string_to_shift}")
else:
    print(string_to_shift)
